<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>在Express 4.x中使用Bootstrap | iT2afL0rd's Blog</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">iT2afL0rd's Blog</a><span class="subtitle">Energy and Persistence conquers</span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" class="sidebar-nav-item">Archives</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>在Express 4.x中使用Bootstrap</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">2014-10-30</div><div class="post-categories"><a class="post-category-link" href="/categories/NodeJS/">NodeJS</a></div><div class="post-tags"><a class="post-tag-link" href="/tags/Bootstrap/">Bootstrap</a></div></div></div><article><div class="container post"><p>学习了Express框架之后，打算用Express开发一个小型的网站深入学习一下。为了避免界面带来的困扰，打算直接使用简洁又优雅的<code>Bootstrap</code>。</p>
<h2 id="创建Express工程"><a href="#创建Express工程" class="headerlink" title="创建Express工程"></a>创建Express工程</h2><p>为了做演示，我们重新新建一个工程。Express中可以使用<code>Jade</code>和<code>ejs</code>两种模版引擎，这二者中<code>ejs</code>相对容易上手，所以在新的工程中使用ejs为模版引擎。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">$ express -e bsapp</span><br><span class="line"></span><br><span class="line">create : bsapp</span><br><span class="line">create : bsapp/package.json</span><br><span class="line">create : bsapp/app.js</span><br><span class="line">create : bsapp/public</span><br><span class="line">create : bsapp/public/images</span><br><span class="line">create : bsapp/public/javascripts</span><br><span class="line">create : bsapp/public/stylesheets</span><br><span class="line">create : bsapp/public/stylesheets/style.css</span><br><span class="line">create : bsapp/routes</span><br><span class="line">create : bsapp/routes/index.js</span><br><span class="line">create : bsapp/routes/users.js</span><br><span class="line">create : bsapp/views</span><br><span class="line">create : bsapp/views/index.ejs</span><br><span class="line">create : bsapp/views/error.ejs</span><br><span class="line">create : bsapp/bin</span><br><span class="line">create : bsapp/bin/www</span><br><span class="line"></span><br><span class="line">install dependencies:</span><br><span class="line">$ cd bsapp &amp;&amp; npm install</span><br><span class="line"></span><br><span class="line">run the app:</span><br><span class="line">$ DEBUG=bsapp ./bin/www</span><br></pre></td></tr></table></figure></p>
<p>按照提示安装依赖模块，然后运行一下看看效果。</p>
<h2 id="下载Bootstrap和jQuery"><a href="#下载Bootstrap和jQuery" class="headerlink" title="下载Bootstrap和jQuery"></a>下载Bootstrap和jQuery</h2><p>从<a href="http://getbootstrap.com/2.3.2/" target="_blank" rel="external">Bootstrap的官方网站</a>下载最新版的Bootstrap，解压开之后看一下所有的文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># ls bootstrap/*</span><br><span class="line">bootstrap/css:</span><br><span class="line">bootstrap-responsive.css     bootstrap-responsive.min.css bootstrap.css                bootstrap.min.css</span><br><span class="line"></span><br><span class="line">bootstrap/img:</span><br><span class="line">glyphicons-halflings-white.png glyphicons-halflings.png</span><br><span class="line"></span><br><span class="line">bootstrap/js:</span><br><span class="line">bootstrap.js     bootstrap.min.js</span><br></pre></td></tr></table></figure></p>
<p>其中所有的<code>Javascript</code>和<code>CSS</code>都提供了开发版和产品版，前者是原始代码，后者经过压缩，文件名中带有min。然后进行一下操作：</p>
<ul>
<li>将img目录整体复制到工程的public目录中（bsapp/public）。</li>
<li>将<code>bootstrap.css</code>和<code>bootstrap-responsive.css</code>复制到<code>bsapp/public/stylesheets</code>目录中。</li>
<li>将<code>bootstrap.js</code>复制到<code>bsapp/public/javascripts</code>中。</li>
</ul>
<p>然后再从<a href="http://jquery.com" target="_blank" rel="external">jQuery官网</a>下载一份最新的<code>jquery.js</code>（如果你下载的不是这个文件名，请修改）也放到<code>bsapp/public/javascripts</code>中。这里下载jQuery是因为Bootstrap依赖jQuery。</p>
<h2 id="编辑代码"><a href="#编辑代码" class="headerlink" title="编辑代码"></a>编辑代码</h2><p>这些插件下载好了之后，接下来就开始修改代码来使用Bootstrap吧。</p>
<h3 id="layout-ejs"><a href="#layout-ejs" class="headerlink" title="layout.ejs"></a>layout.ejs</h3><p>在bsapp/views目录下新建文件layout.ejs:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC “-<span class="comment">//W3C//DTD XHTML 1.0 Transitional//EN”</span></span><br><span class="line">  “http:<span class="comment">//www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd”&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;%= title %&gt; - Demo&lt;/title&gt;</span><br><span class="line">    &lt;link rel=‘stylesheet’ href=‘/stylesheets/bootstrap.css’ /&gt;</span><br><span class="line">    &lt;style type=“text/css”&gt;</span><br><span class="line">      body &#123;</span><br><span class="line">        padding-top: 60px;</span><br><span class="line">        padding-bottom: 40px;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">    &lt;link href=“stylesheets/bootstrap-responsive.css” rel=“stylesheet”&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class=“navbar navbar-fixed-top”&gt;</span><br><span class="line">      &lt;div class=“navbar-inner”&gt;</span><br><span class="line">        &lt;div class=“container”&gt;</span><br><span class="line">          &lt;a class=“btn btn-navbar” data-toggle=“collapse” data-target=“.nav-collapse”&gt;</span><br><span class="line">            &lt;span class=“icon-bar”&gt;&lt;/span&gt;</span><br><span class="line">            &lt;span class=“icon-bar”&gt;&lt;/span&gt;</span><br><span class="line">            &lt;span class=“icon-bar”&gt;&lt;/span&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">          &lt;a class=“brand” href=“/“&gt;Bootstrap&lt;/a&gt;</span><br><span class="line">          &lt;div class=“nav-collapse”&gt;</span><br><span class="line">            &lt;ul class=“nav”&gt;</span><br><span class="line">              &lt;li class=“active”&gt;&lt;a href=“/“&gt;首页&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;&lt;a href=“/login”&gt;登录&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">              &lt;li&gt;&lt;a href=“/reg”&gt;注册&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div id=“container” class=“container”&gt;</span><br><span class="line">      &lt;%- body %&gt;</span><br><span class="line">      &lt;hr /&gt;</span><br><span class="line">      &lt;footer&gt;</span><br><span class="line">        &lt;p&gt;&lt;a href=“http://www.lsq.me/“ target=“_blank”&gt;Powered by iT2afL0rd&lt;/a&gt; 2014&lt;/p&gt;</span><br><span class="line">      &lt;/footer&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">  &lt;script src=“/javascripts/jquery-2.1.1.min.js”&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=“/javascripts/bootstrap.js”&gt;&lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="安装express-partials"><a href="#安装express-partials" class="headerlink" title="安装express-partials"></a>安装express-partials</h2><p>文件新建了之后还不行，新版本的Express取消了对layout.ejs的支持，所以需要安装一个模块<code>express-partials</code>。编辑<code>bsapp/package.json</code>文件，在dependencies里面加一行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“express-partials”: “*”</span><br></pre></td></tr></table></figure></p>
<h3 id="修改app-js"><a href="#修改app-js" class="headerlink" title="修改app.js"></a>修改app.js</h3><p>安装完模块之后，需要修改app.js来使用layout，在app.js中新增两行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var partials = require(‘express-partials’);</span><br><span class="line">app.use(partials());</span><br></pre></td></tr></table></figure></p>
<h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>接下来我们就可以运行看看效果了，在应用根目录下运行<code>DEBUG=bsapp ./bin/www</code>就可以看到下面的效果了：<br>{<1>}<img src="http://it2afl0rd.qiniudn.com/express/express-bootstrap.png" alt="Bootstrap效果"></1></p>
</div><!-- comment system--><div data-thread-key="2014/10/30/nodejs/bootstrap-in-express/" data-title="在Express 4.x中使用Bootstrap" data-url="http://lsq.me/2014/10/30/nodejs/bootstrap-in-express/" class="container ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div class="container"><hr><div data-thread-key="2014/10/30/nodejs/bootstrap-in-express/" data-title="在Express 4.x中使用Bootstrap" data-url="http://lsq.me/2014/10/30/nodejs/bootstrap-in-express/" data-author-key="1" class="ds-thread"></div></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="mailto:qsunme@126.com" target="_blank"><i class="fa fa-envelope-o"></i></a><a href="https://github.com/iT2afL0rd" target="_blank"><i class="fa fa-github"></i></a><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© 2016 <a href="/" rel="nofollow">iT2afL0rd's Blog</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});</script></body></html>